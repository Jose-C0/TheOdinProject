<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Members Only</title>
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/structure.css" />
  <link rel="stylesheet" href="css/pages/index.css" />
  <link rel="stylesheet" href="css/pages/container_message.css" />

</head>

<body class="grid-index">
  <header>
    <%- include("../partials/nav.ejs") %>
  </header>
  <main>
    <div class="title">
      <h1>Messages</h1>
      <%# if (locals.user) { %>
        <a href="/create-msg">Create a new message</a>
        <%# } %>
    </div>
    <div class="container-msg">

      <%# messages.forEach(item=> { %>
        <dl class="card">
          <%# if (locals.user && locals.user.is_member !=undefined && locals.user.is_member===true ) {%>
            <dt class="info-card-span author">
              <p>
                <%#= item.username %>
              </p>
              <p>
                <%#= item.date.toDateString() %>
              </p>
            </dt>

            <%# } %>
              <dt class="info-card-span text">
                <p>
                  <%#= item.title %>
                </p>
              </dt>
              <dt class="info-card-span text">
                <p>
                  <%#= item.description %>
                </p>
              </dt>
        </dl>
        <%# }) %>


    </div>
    <%## if (locals.user) {%>
      <%## } %>
  </main>
  <%## else { %>
    <!--   -->
    <%##}%>
      <%- include("../partials/footer.ejs") %>
</body>

</html>